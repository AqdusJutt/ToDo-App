(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{283:(e,t,r)=>{"use strict";r.d(t,{A:()=>c,AuthProvider:()=>i});var s=r(5155),a=r(2115),o=r(5404),d=r(6104),l=r(5317);let n=(0,a.createContext)(void 0);function i(e){let{children:t}=e,[r,i]=(0,a.useState)(null),[c,u]=(0,a.useState)(!0);(0,a.useEffect)(()=>(0,o.hg)(d.j,e=>{i(e),u(!1)}),[]);let h=async(e,t)=>{try{await (0,o.x9)(d.j,e,t)}catch(e){throw e}},x=async(e,t,r)=>{try{let s=await (0,o.eJ)(d.j,e,t);await (0,l.BN)((0,l.H9)(d.db,"users",s.user.uid),{name:r,email:e,createdAt:new Date})}catch(e){throw e}},g=async()=>{try{await (0,o.CI)(d.j)}catch(e){throw e}};return(0,s.jsx)(n.Provider,{value:{user:r,loading:c,signIn:h,signUp:x,logout:g},children:t})}function c(){let e=(0,a.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},4023:(e,t,r)=>{Promise.resolve().then(r.bind(r,6762))},5695:(e,t,r)=>{"use strict";var s=r(8999);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},6104:(e,t,r)=>{"use strict";r.d(t,{db:()=>n,j:()=>l});var s=r(3915),a=r(5404),o=r(5317);let d=(0,s.Wp)({apiKey:"AIzaSyCloCroLktXRY-gwRdxzba9OPtQgDS_44w",authDomain:"to-do-app-d2980.firebaseapp.com",projectId:"to-do-app-d2980",storageBucket:"to-do-app-d2980.firebasestorage.app",messagingSenderId:"127619535521",appId:"1:127619535521:web:28a110649a44918f02d6e0"}),l=(0,a.xI)(d),n=(0,o.aU)(d)},6762:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var s=r(5155),a=r(2115),o=r(5695),d=r(283),l=r(5317),n=r(6104);let i={async createTodo(e){try{return(await (0,l.gS)((0,l.rJ)(n.db,"todos"),{...e,createdAt:l.Dc.now()})).id}catch(e){throw console.error("Error creating todo:",e),e}},async getTodos(e){try{console.log("Fetching todos for userId:",e);let t=(0,l.P)((0,l.rJ)(n.db,"todos"),(0,l._M)("userId","==",e),(0,l.My)("createdAt","desc")),r=(await (0,l.GG)(t)).docs.map(e=>({id:e.id,...e.data()}));return console.log("Found todos:",r),r}catch(e){throw console.error("Error getting todos:",e),e}},async updateTodo(e,t){try{let r=(0,l.H9)(n.db,"todos",e);await (0,l.mZ)(r,t)}catch(e){throw console.error("Error updating todo:",e),e}},async deleteTodo(e){try{let t=(0,l.H9)(n.db,"todos",e);await (0,l.kd)(t)}catch(e){throw console.error("Error deleting todo:",e),e}},async toggleTodo(e,t){try{await this.updateTodo(e,{completed:t})}catch(e){throw console.error("Error toggling todo:",e),e}}};function c(e){let{size:t="md"}=e;return(0,s.jsx)("div",{className:"flex justify-center items-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full border-b-2 border-blue-500 ".concat({sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[t])})})}function u(e){let{children:t}=e,{user:r,loading:l}=(0,d.A)(),n=(0,o.useRouter)();return((0,a.useEffect)(()=>{l||r||n.push("/")},[r,l,n]),l)?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(c,{size:"lg"}),(0,s.jsx)("p",{className:"text-gray-600 mt-4",children:"Loading..."})]})}):r?(0,s.jsx)(s.Fragment,{children:t}):null}function h(){let[e,t]=(0,a.useState)([]),[r,c]=(0,a.useState)(""),[h,x]=(0,a.useState)(!0),[g,m]=(0,a.useState)(!1),[p,b]=(0,a.useState)(null),[y,f]=(0,a.useState)(""),w=(0,o.useRouter)(),{user:j,logout:v}=(0,d.A)();(0,a.useEffect)(()=>{j&&(k(),N(j.uid),f(new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})))},[j]);let N=async e=>{try{let t=await (0,l.x7)((0,l.H9)(n.db,"users",e));if(t.exists()){let e=t.data();b(e.name||null)}else b(null)}catch(e){console.error("Error fetching user data:",e),b(null)}},k=async()=>{if(!(null==j?void 0:j.uid))return void console.log("No user UID found");try{x(!0);let e=await i.getTodos(j.uid);t(e)}catch(e){console.error("Error loading todos:",e)}finally{x(!1)}},E=async()=>{if(r.trim()&&(null==j?void 0:j.uid))try{m(!0),await i.createTodo({text:r.trim(),completed:!1,userId:j.uid}),c(""),await k()}catch(e){console.error("Error adding todo:",e)}finally{m(!1)}},S=async(e,t)=>{try{await i.toggleTodo(e,!t),await k()}catch(e){console.error("Error toggling todo:",e)}},A=async e=>{try{await i.deleteTodo(e),await k()}catch(e){console.error("Error deleting todo:",e)}},C=async()=>{try{await v(),w.push("/")}catch(e){console.error("Error logging out:",e)}};return(0,s.jsx)(u,{children:(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-16 h-16 rounded-full overflow-hidden bg-gray-200 flex-shrink-0",children:(0,s.jsx)("svg",{className:"w-full h-full text-gray-400",fill:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M24 20.993V24H0v-3.007a.999.999 0 011-1h22a.999.999 0 011 1zM12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm0 4a4 4 0 100 8 4 4 0 000-8z"})})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:["Welcome back, ",p||(null==j?void 0:j.email),"!"]}),(0,s.jsx)("p",{className:"text-gray-600",children:y})]})]}),(0,s.jsx)("button",{onClick:C,className:"bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors",children:"Logout"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Add New Task"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"text",value:r,onChange:e=>c(e.target.value),onKeyPress:e=>{"Enter"!==e.key||g||E()},placeholder:"What do you need to do today?",className:"flex-1 border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400",disabled:g}),(0,s.jsx)("button",{onClick:E,disabled:g||!r.trim(),className:"bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Adding...":"Add"})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold mb-4 text-gray-800",children:["Your Tasks (",e.filter(e=>!e.completed).length," remaining)"]}),h?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"}),(0,s.jsx)("p",{className:"text-gray-500 mt-2",children:"Loading tasks..."})]}):0===e.length?(0,s.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,s.jsx)("p",{className:"text-lg mb-2",children:"No tasks yet!"}),(0,s.jsx)("p",{children:"Add your first task above to get started."})]}):(0,s.jsx)("div",{className:"space-y-3",children:e.map(e=>{var t;return(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg border ".concat(e.completed?"bg-gray-50 border-gray-200":"bg-white border-gray-300"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,s.jsx)("input",{type:"checkbox",checked:e.completed,onChange:()=>S(e.id,e.completed),className:"w-5 h-5 text-blue-500 rounded focus:ring-blue-400"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-lg ".concat(e.completed?"line-through text-gray-500":"text-gray-800"),children:e.text}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:(t=e.createdAt)?(t&&"object"==typeof t&&"toDate"in t?t.toDate():new Date(t)).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):""})]})]}),(0,s.jsx)("button",{onClick:()=>A(e.id),className:"text-red-500 hover:text-red-700 transition-colors ml-4",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},e.id)})})]}),e.length>0&&(0,s.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 text-center",children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-blue-500",children:e.length}),(0,s.jsx)("p",{className:"text-gray-600",children:"Total Tasks"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 text-center",children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-green-500",children:e.filter(e=>e.completed).length}),(0,s.jsx)("p",{className:"text-gray-600",children:"Completed"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 text-center",children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-orange-500",children:e.filter(e=>!e.completed).length}),(0,s.jsx)("p",{className:"text-gray-600",children:"Pending"})]})]})]})})})}}},e=>{e.O(0,[135,965,670,441,964,358],()=>e(e.s=4023)),_N_E=e.O()}]);